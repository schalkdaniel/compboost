<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This base learner subtracts the effect of two base learners (usually defined
on the same feature). By subtracting the effects, one is not able to predict
the other one. This becomes handy for decomposing effects into, e.g., a
linear and non-linear component in which the non-linear component
is not capable to capture the linear part and hence is selected after
the linear effect is estimated."><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Centering a base learner by another one — BaselearnerCentered • compboost</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Centering a base learner by another one — BaselearnerCentered"><meta property="og:description" content="This base learner subtracts the effect of two base learners (usually defined
on the same feature). By subtracting the effects, one is not able to predict
the other one. This becomes handy for decomposing effects into, e.g., a
linear and non-linear component in which the non-linear component
is not capable to capture the linear part and hence is selected after
the linear effect is estimated."><meta property="og:image" content="https://schalkdaniel.github.io/compboost/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">compboost</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-getting-started">Getting Started</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-getting-started">
    <a class="dropdown-item" href="../articles/basic-about-cwb.html">About component-wise boosting</a>
    <a class="dropdown-item" href="../articles/basic-use-case.html">First use-case</a>
    <a class="dropdown-item" href="../articles/basic-early-stopping.html">Early stopping</a>
    <a class="dropdown-item" href="../articles/basic-robust-reg.html">Quantile regression</a>
    <a class="dropdown-item" href="../articles/basic-obj-refs.html">Reference-based objects in compboost</a>
    <a class="dropdown-item" href="../articles/basic-viz.html">Visualizing compboost</a>
    <a class="dropdown-item" href="../articles/basic-mlr-learners.html">mlr3 learners</a>
    <a class="dropdown-item" href="../articles/basic-production-model.html">Production model</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-advanced-topics">Advanced Topics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-advanced-topics">
    <a class="dropdown-item" href="../articles/adv-extending-losses.html">Extending losses</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-functionality">Functionality</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-functionality">
    <a class="dropdown-item" href="../articles/fct-baselearner.html">Base learner</a>
    <a class="dropdown-item" href="../articles/fct-loss.html">Loss functions</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/schalkdaniel/compboost">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>

        
        
        
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Centering a base learner by another one</h1>
      <small class="dont-index">Source: <a href="https://github.com/schalkdaniel/compboost/blob/HEAD/R/RcppExports.R" class="external-link"><code>R/RcppExports.R</code></a></small>
      <div class="d-none name"><code>BaselearnerCentered.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This base learner subtracts the effect of two base learners (usually defined
on the same feature). By subtracting the effects, one is not able to predict
the other one. This becomes handy for decomposing effects into, e.g., a
linear and non-linear component in which the non-linear component
is not capable to capture the linear part and hence is selected after
the linear effect is estimated.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p><a href="https://rdrr.io/r/base/isS4.html" class="external-link">S4</a> object.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>
    

<p>This class doesn't contain public fields.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    

<ul><li><p><code>$summarizeFactory()</code>: <code>() -&gt; ()</code></p></li>
<li><p><code>$transfromData(newdata)</code>: <code>list(InMemoryData) -&gt; matrix()</code></p></li>
<li><p><code>$getMeta()</code>: <code>() -&gt; list()</code></p></li>
<li><p><code>$getRotation()</code>: <code>() -&gt; matrix()</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="inherited-methods-from-baselearner">Inherited methods from Baselearner<a class="anchor" aria-label="anchor" href="#inherited-methods-from-baselearner"></a></h2>
    

<ul><li><p><code>$getData()</code>: <code>() -&gt; matrix()</code></p></li>
<li><p><code>$getDF()</code>: <code>() -&gt; integer()</code></p></li>
<li><p><code>$getPenalty()</code>: <code>() -&gt; numeric()</code></p></li>
<li><p><code>$getPenaltyMat()</code>: <code>() -&gt; matrix()</code></p></li>
<li><p><code>$getFeatureName()</code>: <code>() -&gt; character()</code></p></li>
<li><p><code>$getModelName()</code>: <code>() -&gt; character()</code></p></li>
<li><p><code>$getBaselearnerId()</code>: <code>() -&gt; character()</code></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Sample data:</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># S4 wrapper</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create new data object, a matrix is required as input:</span></span></span>
<span class="r-in"><span><span class="va">data_mat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data_source</span> <span class="op">=</span> <span class="va"><a href="InMemoryData.html">InMemoryData</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">data_mat</span>, <span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prerequisite: Create a linear and spline base learner:</span></span></span>
<span class="r-in"><span><span class="va">bl_lin</span> <span class="op">=</span> <span class="va"><a href="BaselearnerPolynomial.html">BaselearnerPolynomial</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">data_source</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>degree <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bl_sp</span> <span class="op">=</span> <span class="va"><a href="BaselearnerPSpline.html">BaselearnerPSpline</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">data_source</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n_knots <span class="op">=</span> <span class="fl">15</span>, df <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now, subtract the linear effect from the spline:</span></span></span>
<span class="r-in"><span><span class="va">bl_ctr</span> <span class="op">=</span> <span class="va">BaselearnerCentered</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">bl_sp</span>, <span class="va">bl_lin</span>, <span class="st">"ctr"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Recognize, that the data matrix of this base learner has</span></span></span>
<span class="r-in"><span><span class="co"># `nrow(bl_sp$getData()) - ncol(bl_lin$getData())` columns:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">bl_ctr</span><span class="op">$</span><span class="fu">getData</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 100  17</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">bl_ctr</span><span class="op">$</span><span class="fu">getMeta</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ df         : num [1, 1] 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ penalty    : num [1, 1] 54.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ penalty_mat: num [1:17, 1:17] 8.17 -3.197 1.872 0.568 0.295 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ rotation   : num [1:19, 1:17] -0.22 -0.4 0.828 -0.187 -0.129 ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The data matrix is created by rotating the spline data matrix:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">bl_sp</span><span class="op">$</span><span class="fu">getData</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">bl_ctr</span><span class="op">$</span><span class="fu">getRotation</span><span class="op">(</span><span class="op">)</span>, <span class="va">bl_ctr</span><span class="op">$</span><span class="fu">getData</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Transform "new data". Internally, the basis of the spline is build and</span></span></span>
<span class="r-in"><span><span class="co"># then rotated by the rotation matrix to subtract the linear part:</span></span></span>
<span class="r-in"><span><span class="va">newdata</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va"><a href="InMemoryData.html">InMemoryData</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, <span class="st">"x"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bl_ctr</span><span class="op">$</span><span class="fu">transformData</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             [,1]        [,2]       [,3]       [,4]       [,5]       [,6]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] -0.16515610 -0.35674500 -0.2410725 -0.2030835 -0.2039283 -0.1499200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] -0.16515610 -0.35674500 -0.2410725 -0.2030835 -0.2039283 -0.1499200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  0.18602616 -0.28550574 -0.2042327 -0.1704013 -0.1685957 -0.1218412</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]  0.45545442 -0.05562758 -0.1558414 -0.1329924 -0.1361532 -0.1022759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]  0.08182039 -0.31650770 -0.2169446 -0.1807980 -0.1785597 -0.1287680</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             [,7]        [,8]        [,9]        [,10]        [,11]      [,12]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] -0.11710389 -0.09003953 -0.03456622 -0.006220806  0.016398695 0.06367093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] -0.11710389 -0.09003953 -0.03456622 -0.006220806  0.016398695 0.06367093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] -0.09177613 -0.06665435 -0.02160958  0.010907900  0.030074114 0.07026071</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] -0.08340964 -0.06818838 -0.03030398 -0.020798712 -0.006179768 0.02423600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] -0.09654394 -0.06957980 -0.02197934  0.013642752  0.034002333 0.07670779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           [,13]      [,14]     [,15]      [,16]       [,17]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.11541607 0.15521650 0.2051516 0.15036233 0.016504709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.11541607 0.15521650 0.2051516 0.15036233 0.016504709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.12071057 0.15557249 0.2013164 0.14605983 0.015985565</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.05082958 0.07537263 0.1040861 0.07783496 0.008592261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] 0.13113804 0.16831517 0.2173434 0.15752415 0.017235086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># R6 wrapper</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compboost has a wrapper called `$addComponents()` that automatically</span></span></span>
<span class="r-in"><span><span class="va">cboost</span> <span class="op">=</span> <span class="va"><a href="Compboost.html">Compboost</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">dat</span>, <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># creates and adds the linear base learner and a centered base learner</span></span></span>
<span class="r-in"><span><span class="co"># as above (the `...` args are passed to `BaselearnerPSpline$new():</span></span></span>
<span class="r-in"><span><span class="va">cboost</span><span class="op">$</span><span class="fu">addComponents</span><span class="op">(</span><span class="st">"x"</span>, n_knots <span class="op">=</span> <span class="fl">10</span>, df <span class="op">=</span> <span class="fl">5</span>, bin_root <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that we have used binning to save memory, hence the data matrix</span></span></span>
<span class="r-in"><span><span class="co"># is reduced to 10 observations:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="va">baselearner_list</span><span class="op">$</span><span class="va">x_x_spline_centered</span><span class="op">$</span><span class="va">factory</span><span class="op">$</span><span class="fu">getData</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10 12</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cboost</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fl">200</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Train 200 iterations in 0 Seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Final risk based on the train set: 0.39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="plotPEUni.html">plotPEUni</a></span><span class="op">(</span><span class="va">cboost</span>, <span class="st">"x"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="va">offset</span><span class="op">)</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="BaselearnerCentered-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="copyright">
  <p></p><p>Developed by Daniel Schalk, Janek Thomas, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer></div>

  

  

  </body></html>

