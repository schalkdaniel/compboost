<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>First Use-Case • compboost</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="First Use-Case">
<meta property="og:description" content="compboost">
<meta property="og:image" content="https://schalkdaniel.github.io/compboost/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">compboost</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/getting_started/about_cboosting.html">About Component-Wise Boosting</a>
    </li>
    <li>
      <a href="../../articles/getting_started/use_case.html">First Use-Case</a>
    </li>
    <li>
      <a href="../../articles/getting_started/early_stopping.html">Early Stopping</a>
    </li>
    <li>
      <a href="../../articles/getting_started/robust_regression.html">Quantile Regression</a>
    </li>
    <li>
      <a href="../../articles/getting_started/object_references.html">Reference Based Objects of Compboost</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced Topics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/advanced/ext_losses.html">Extending Losses</a>
    </li>
    <li>
      <a href="../../articles/advanced/ext_blearner.html">Extending Base-Learner</a>
    </li>
    <li>
      <a href="../../articles/advanced/log_performance.html">Logging Performance Measures</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Functionality
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/functionality/baselearner.html">Base-Learner</a>
    </li>
    <li>
      <a href="../../articles/functionality/loss.html">Loss Functions</a>
    </li>
    <li>
      <a href="../../articles/functionality/logger.html">Logger</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/schalkdaniel/compboost">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>First Use-Case</h1>
            
      
      
      <div class="hidden name"><code>use_case.Rmd</code></div>

    </div>

    
    
<div id="data-titanic-passenger-survival-data-set" class="section level2">
<h2 class="hasAnchor">
<a href="#data-titanic-passenger-survival-data-set" class="anchor"></a>Data: Titanic Passenger Survival Data Set</h2>
<p>We use the <a href="https://www.kaggle.com/c/titanic/data">titanic dataset</a> with binary classification on <code>survived</code>. First of all, we store the train and test data into two data frames and remove all rows that contains missing values (<code>NA</code>s):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Store train and test data:</span>
<span class="va">df_train</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="fu">titanic</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/titanic/man/titanic_train.html">titanic_train</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">df_train</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    714 obs. of  12 variables:</span>
<span class="co">#&gt;  $ PassengerId: int  1 2 3 4 5 7 8 9 10 11 ...</span>
<span class="co">#&gt;  $ Survived   : int  0 1 1 1 0 0 0 1 1 1 ...</span>
<span class="co">#&gt;  $ Pclass     : int  3 1 3 1 3 1 3 3 2 3 ...</span>
<span class="co">#&gt;  $ Name       : chr  "Braund, Mr. Owen Harris" "Cumings, Mrs. John Bradley (Florence Briggs Thayer)" "Heikkinen, Miss. Laina" "Futrelle, Mrs. Jacques Heath (Lily May Peel)" ...</span>
<span class="co">#&gt;  $ Sex        : chr  "male" "female" "female" "female" ...</span>
<span class="co">#&gt;  $ Age        : num  22 38 26 35 35 54 2 27 14 4 ...</span>
<span class="co">#&gt;  $ SibSp      : int  1 1 0 1 0 0 3 0 1 1 ...</span>
<span class="co">#&gt;  $ Parch      : int  0 0 0 0 0 0 1 2 0 1 ...</span>
<span class="co">#&gt;  $ Ticket     : chr  "A/5 21171" "PC 17599" "STON/O2. 3101282" "113803" ...</span>
<span class="co">#&gt;  $ Fare       : num  7.25 71.28 7.92 53.1 8.05 ...</span>
<span class="co">#&gt;  $ Cabin      : chr  "" "C85" "" "C123" ...</span>
<span class="co">#&gt;  $ Embarked   : chr  "S" "C" "S" "S" ...</span>
<span class="co">#&gt;  - attr(*, "na.action")= 'omit' Named int [1:177] 6 18 20 27 29 30 32 33 37 43 ...</span>
<span class="co">#&gt;   ..- attr(*, "names")= chr [1:177] "6" "18" "20" "27" ...</span></code></pre></div>
<p>In the next step we transform the response to a factor having more intuitive levels:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_train</span><span class="op">$</span><span class="va">Survived</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">df_train</span><span class="op">$</span><span class="va">Survived</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="st">"yes"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="initializing-model" class="section level2">
<h2 class="hasAnchor">
<a href="#initializing-model" class="anchor"></a>Initializing Model</h2>
<p>Due to the <code>R6</code> API it is necessary to create a new class object by calling the <code>$new()</code> constructor which gets the data, the target as character, and the used loss. Note that it is important to pass an initialized loss object which gives the opportunity to use, for example, a custom offset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span> <span class="op">=</span> <span class="va"><a href="../../reference/Compboost.html">Compboost</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_train</span>, target <span class="op">=</span> <span class="st">"Survived"</span>,
  loss <span class="op">=</span> <span class="va"><a href="../../reference/LossBinomial.html">LossBinomial</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>, oob_fraction <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></code></pre></div>
</div>
<div id="adding-base-learner" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-base-learner" class="anchor"></a>Adding Base-Learner</h2>
<p>Adding new base-learners requires as first argument a character to indicate what feature we want to use for the new base-learner. As second argument it is important to define an identifier for the factory. This is necessary since it is possible to define multiple base-learners on the same source.</p>
<div id="numerical-features" class="section level3">
<h3 class="hasAnchor">
<a href="#numerical-features" class="anchor"></a>Numerical Features</h3>
<p>We can define a spline and a linear base-learner of the same feature:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Spline base-learner of age:</span>
<span class="va">cboost</span><span class="op">$</span><span class="fu">addBaselearner</span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"spline"</span>, <span class="va">BaselearnerPSpline</span><span class="op">)</span>

<span class="co"># Linear base-learner of age (degree = 1 with intercept is default):</span>
<span class="va">cboost</span><span class="op">$</span><span class="fu">addBaselearner</span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"linear"</span>, <span class="va">BaselearnerPolynomial</span><span class="op">)</span></code></pre></div>
<p>Additional arguments can be specified after the base-learner. For a complete list see the <a href="https://compboost.org/functionality.html">functionality</a> at the project page:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Spline base-learner of fare:</span>
<span class="va">cboost</span><span class="op">$</span><span class="fu">addBaselearner</span><span class="op">(</span><span class="st">"Fare"</span>, <span class="st">"spline"</span>, <span class="va">BaselearnerPSpline</span>, degree <span class="op">=</span> <span class="fl">2</span>,
  n_knots <span class="op">=</span> <span class="fl">14</span>, penalty <span class="op">=</span> <span class="fl">10</span>, differences <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
</div>
<div id="categorical-features" class="section level3">
<h3 class="hasAnchor">
<a href="#categorical-features" class="anchor"></a>Categorical Features</h3>
<p>When adding categorical features, each group is added as single base-learner. Do also note that we don’t want an intercept here:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span><span class="op">$</span><span class="fu">addBaselearner</span><span class="op">(</span><span class="st">"Sex"</span>, <span class="st">"categorical"</span>, <span class="va">BaselearnerPolynomial</span>,
  intercept <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>Finally, we can get all registered factories:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span><span class="op">$</span><span class="fu">getBaselearnerNames</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "Age_spline"             "Age_linear"             "Fare_spline"           </span>
<span class="co">#&gt; [4] "Sex_female_categorical" "Sex_male_categorical"</span></code></pre></div>
</div>
</div>
<div id="define-logger" class="section level2">
<h2 class="hasAnchor">
<a href="#define-logger" class="anchor"></a>Define Logger</h2>
<p>A logger is another class that is evaluated after each iteration to track the performance, elapsed runtime, or the iterations. For each <code>Compboost</code> object is by default one iterations logger defined with as many iterations as specified in the <code>$train()</code> function.</p>
<p>To be able to control the fitting behavior with logger, each logger can also be defined as stopper to stop the fitting process after a pre-defined stopping criteria.</p>
<div id="time-logger" class="section level3">
<h3 class="hasAnchor">
<a href="#time-logger" class="anchor"></a>Time logger</h3>
<p>This logger tracks the elapsed time. The time unit can be one of <code>microseconds</code>, <code>seconds</code> or <code>minutes</code>. The logger stops if <code>max_time</code> is reached. But we do not use that logger as stopper here:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span><span class="op">$</span><span class="fu">addLogger</span><span class="op">(</span>logger <span class="op">=</span> <span class="va">LoggerTime</span>, use_as_stopper <span class="op">=</span> <span class="cn">FALSE</span>, logger_id <span class="op">=</span> <span class="st">"time"</span>,
  max_time <span class="op">=</span> <span class="fl">0</span>, time_unit <span class="op">=</span> <span class="st">"microseconds"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="train-model-and-access-elements" class="section level2">
<h2 class="hasAnchor">
<a href="#train-model-and-access-elements" class="anchor"></a>Train Model and Access Elements</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fl">2000</span>, trace <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="co">#&gt;    1/2000   risk = 0.73  oob_risk = 0.73   time = 0   </span>
<span class="co">#&gt;  100/2000   risk = 0.66  oob_risk = 0.66   time = 14221   </span>
<span class="co">#&gt;  200/2000   risk = 0.64  oob_risk = 0.64   time = 29367   </span>
<span class="co">#&gt;  300/2000   risk = 0.62  oob_risk = 0.63   time = 44788   </span>
<span class="co">#&gt;  400/2000   risk = 0.62  oob_risk = 0.63   time = 60776   </span>
<span class="co">#&gt;  500/2000   risk = 0.61  oob_risk = 0.63   time = 77189   </span>
<span class="co">#&gt;  600/2000   risk = 0.61  oob_risk = 0.63   time = 94338   </span>
<span class="co">#&gt;  700/2000   risk = 0.61  oob_risk = 0.62   time = 111718   </span>
<span class="co">#&gt;  800/2000   risk = 0.61  oob_risk = 0.62   time = 129521   </span>
<span class="co">#&gt;  900/2000   risk = 0.61  oob_risk = 0.62   time = 147811   </span>
<span class="co">#&gt; 1000/2000   risk = 0.61  oob_risk = 0.62   time = 168096   </span>
<span class="co">#&gt; 1100/2000   risk = 0.61  oob_risk = 0.62   time = 187106   </span>
<span class="co">#&gt; 1200/2000   risk = 0.6  oob_risk = 0.62   time = 207724   </span>
<span class="co">#&gt; 1300/2000   risk = 0.6  oob_risk = 0.62   time = 227431   </span>
<span class="co">#&gt; 1400/2000   risk = 0.6  oob_risk = 0.62   time = 247489   </span>
<span class="co">#&gt; 1500/2000   risk = 0.6  oob_risk = 0.62   time = 268042   </span>
<span class="co">#&gt; 1600/2000   risk = 0.6  oob_risk = 0.62   time = 288961   </span>
<span class="co">#&gt; 1700/2000   risk = 0.6  oob_risk = 0.62   time = 310243   </span>
<span class="co">#&gt; 1800/2000   risk = 0.6  oob_risk = 0.62   time = 331781   </span>
<span class="co">#&gt; 1900/2000   risk = 0.6  oob_risk = 0.62   time = 355006   </span>
<span class="co">#&gt; 2000/2000   risk = 0.6  oob_risk = 0.62   time = 377719   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Train 2000 iterations in 0 Seconds.</span>
<span class="co">#&gt; Final risk based on the train set: 0.6</span>
<span class="va">cboost</span>
<span class="co">#&gt; Component-Wise Gradient Boosting</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Trained on df_train with target Survived</span>
<span class="co">#&gt; Number of base-learners: 5</span>
<span class="co">#&gt; Learning rate: 0.05</span>
<span class="co">#&gt; Iterations: 2000</span>
<span class="co">#&gt; Offset: 0.1861</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; LossBinomial Loss:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Loss function: L(y,x) = log(1 + exp(-2yf(x))</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span></code></pre></div>
<p>Objects of the <code>Compboost</code> class do have member functions such as <code>$getEstimatedCoef()</code>, <code>$getInbagRisk()</code> or <code>$predict()</code> to access the results:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">getEstimatedCoef</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 5</span>
<span class="co">#&gt;  $ Age_spline            : num [1:24, 1] -4.138 -0.764 -2.536 1.246 1.86 ...</span>
<span class="co">#&gt;  $ Fare_spline           : num [1:17, 1] 1.166 0.484 -0.349 -1.445 -1.641 ...</span>
<span class="co">#&gt;  $ Sex_female_categorical: num [1, 1] -1.51</span>
<span class="co">#&gt;  $ Sex_male_categorical  : num [1, 1] 0.681</span>
<span class="co">#&gt;  $ offset                : num 0.186</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">getInbagRisk</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  num [1:2001] 0.735 0.735 0.735 0.733 0.733 ...</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  num [1:500, 1] -0.845 -2.11 1.171 1.195 -0.762 ...</span></code></pre></div>
<p>To obtain a vector of the selected base-learners just call <code>$getSelectedBaselearner()</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">getSelectedBaselearner</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             Age_spline            Fare_spline Sex_female_categorical </span>
<span class="co">#&gt;                   1156                    492                    278 </span>
<span class="co">#&gt;   Sex_male_categorical </span>
<span class="co">#&gt;                     74</span></code></pre></div>
<p>We can also access the predictions directly from the response object <code>cboost$response</code> and <code>cboost$response_oob</code>. Note that <code>$response_oob</code> was created automatically when defining an <code>oob_fraction</code> within the constructor:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">oob_label</span> <span class="op">=</span> <span class="va">cboost</span><span class="op">$</span><span class="va">response_oob</span><span class="op">$</span><span class="fu">getResponse</span><span class="op">(</span><span class="op">)</span>
<span class="va">oob_pred</span> <span class="op">=</span> <span class="va">cboost</span><span class="op">$</span><span class="va">response_oob</span><span class="op">$</span><span class="fu">getPredictionResponse</span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span>true_label <span class="op">=</span> <span class="va">oob_label</span>, predicted <span class="op">=</span> <span class="va">oob_pred</span><span class="op">)</span>
<span class="co">#&gt;           predicted</span>
<span class="co">#&gt; true_label  -1   1</span>
<span class="co">#&gt;         -1  60  26</span>
<span class="co">#&gt;         1   22 106</span></code></pre></div>
</div>
<div id="visualizing-inbag-vs-out-of-bag-behavior" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizing-inbag-vs-out-of-bag-behavior" class="anchor"></a>Visualizing Inbag vs. Out-Of-Bag Behavior</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span><span class="op">$</span><span class="fu">plotInbagVsOobRisk</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="use_case_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
<div id="retrain-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#retrain-the-model" class="anchor"></a>Retrain the Model</h2>
<p>To set the whole model to another iteration one can again call <code>$train()</code>. The model is then set to an already seen iteration, if the new iteration is smaller than the already trained once or it trains additional base-learner until the new number is reached:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cboost</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fl">3000</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; You have already trained 2000 iterations.</span>
<span class="co">#&gt; Train 1000 additional iterations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 2025/3000   risk = 0.6  oob_risk = 0.62   time = 383565   </span>
<span class="co">#&gt; 2100/3000   risk = 0.6  oob_risk = 0.62   time = 400792   </span>
<span class="co">#&gt; 2175/3000   risk = 0.6  oob_risk = 0.62   time = 418235   </span>
<span class="co">#&gt; 2250/3000   risk = 0.6  oob_risk = 0.62   time = 436754   </span>
<span class="co">#&gt; 2325/3000   risk = 0.6  oob_risk = 0.62   time = 454523   </span>
<span class="co">#&gt; 2400/3000   risk = 0.6  oob_risk = 0.62   time = 472664   </span>
<span class="co">#&gt; 2475/3000   risk = 0.6  oob_risk = 0.62   time = 491741   </span>
<span class="co">#&gt; 2550/3000   risk = 0.6  oob_risk = 0.62   time = 510149   </span>
<span class="co">#&gt; 2625/3000   risk = 0.6  oob_risk = 0.62   time = 528716   </span>
<span class="co">#&gt; 2700/3000   risk = 0.6  oob_risk = 0.62   time = 547658   </span>
<span class="co">#&gt; 2775/3000   risk = 0.6  oob_risk = 0.62   time = 566612   </span>
<span class="co">#&gt; 2850/3000   risk = 0.6  oob_risk = 0.62   time = 585846   </span>
<span class="co">#&gt; 2925/3000   risk = 0.6  oob_risk = 0.62   time = 605350   </span>
<span class="co">#&gt; 3000/3000   risk = 0.6  oob_risk = 0.62   time = 624893</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">getEstimatedCoef</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; List of 5</span>
<span class="co">#&gt;  $ Age_spline            : num [1:24, 1] -6.978 -0.123 -2.918 1.455 1.724 ...</span>
<span class="co">#&gt;  $ Fare_spline           : num [1:17, 1] 1.139 0.495 -0.344 -1.465 -1.671 ...</span>
<span class="co">#&gt;  $ Sex_female_categorical: num [1, 1] -1.52</span>
<span class="co">#&gt;  $ Sex_male_categorical  : num [1, 1] 0.681</span>
<span class="co">#&gt;  $ offset                : num 0.186</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">getInbagRisk</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  num [1:3001] 0.735 0.735 0.735 0.733 0.733 ...</span>

<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">cboost</span><span class="op">$</span><span class="fu">getSelectedBaselearner</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             Age_spline            Fare_spline Sex_female_categorical </span>
<span class="co">#&gt;                   2055                    578                    293 </span>
<span class="co">#&gt;   Sex_male_categorical </span>
<span class="co">#&gt;                     74</span></code></pre></div>
</div>
<div id="visualizing-base-learner" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizing-base-learner" class="anchor"></a>Visualizing Base-Learner</h2>
<p>To visualize a base-learner it is important to exactly use a name from <code>$getBaselearnerNames()</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gg1</span> <span class="op">=</span> <span class="va">cboost</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"Age_spline"</span><span class="op">)</span>
<span class="va">gg2</span> <span class="op">=</span> <span class="va">cboost</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"Age_spline"</span>, iters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="use_case_files/figure-html/unnamed-chunk-17-1.png" width="600px" height="400px" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gg1</span> <span class="op">=</span> <span class="va">cboost</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"Age_spline"</span><span class="op">)</span>
<span class="va">gg2</span> <span class="op">=</span> <span class="va">cboost</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"Age_spline"</span>, iters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="use_case_files/figure-html/unnamed-chunk-19-1.png" width="600px" height="400px" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Daniel Schalk, Janek Thomas, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
